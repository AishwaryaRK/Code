package com.ak.gojek.parkinglotsystem.parkinglot;

import java.util.ArrayList;
import java.util.List;

import com.ak.gojek.parkinglotsystem.car.Car;

public class ParkingLotBuilder {
	private List<ParkingLot> parkingLots;
	private int strategy;

	public ParkingLotBuilder() {
		super();
		this.parkingLots = new ArrayList<ParkingLot>();
	}

	public void createParkingLot(int slotCapacity) {
		ParkingLot parkingLot = new ParkingLot(slotCapacity);
		parkingLots.add(parkingLot);
	}

	public void setStrategy(int strategy) {
		this.strategy = strategy;
	}

	public List<ParkingLot> getParkingLots() {
		return parkingLots;
	}

	public int getStrategy() {
		return strategy;
	}

	public void park(Car car) {
		ParkingLot parkingLot;
		if (getStrategy() == 1) {
			parkCarInNearestMostEmptyParkingLot(car);
		} else if (getStrategy() == 2) {
			parkCarInNearestParkingLot(car);
		}
		parkingLot.park(car);

	}

	private void parkCarInNearestParkingLot(Car car) {

	}

	private void parkCarInNearestMostEmptyParkingLot(Car car) {
		ParkingLot parkingLot = getMostEmptyParkingLot();
		parkingLot.park(car);
	}

	private ParkingLot getMostEmptyParkingLot() {
		int numberOfEmptySlots = 0;
		ParkingLot mostEmptyParkingLot = null;
		for (ParkingLot parkingLot : parkingLots) {
			if (parkingLot.getNumberOfEmptySlots() > numberOfEmptySlots) {
				numberOfEmptySlots = parkingLot.getNumberOfEmptySlots();
				mostEmptyParkingLot = parkingLot;
			}
		}
		return mostEmptyParkingLot;
	}

}
